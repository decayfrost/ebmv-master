var PageJs=new Class.create();PageJs.prototype=Object.extend(new FrontPageJs(),{pagination:{pageNo:1,pageSize:30},_htmlIds:{resultListId:"",totalCountDivId:""},setHTMLIDs:function(a,b){this._htmlIds.resultListId=a;this._htmlIds.totalCountDivId=b;return this},_getPaginBtns:function(a){if(a.pageNumber>=a.totalPages){return}var b={};b.me=this;b.paginDiv=new Element("tfoot",{"class":"paginDiv"}).insert({bottom:new Element("tr").insert({bottom:new Element("td",{colspan:6}).insert({bottom:new Element("span",{"class":"btn btn-primary","data-loading-text":"Getting more ..."}).update("Get more").observe("click",function(){b.btn=this;b.me._signRandID(b.btn);jQuery("#"+b.btn.id).button("loading");b.me.load(b.me.pagination.pageNo+1,b.me.pagination.pageSize,false,function(){$(b.btn).up(".paginDiv").remove()})})})})});return b.paginDiv},_getResultRow:function(c,a){var b={};b.me=this;b.isTitle=(a||false);b.tag=(b.isTitle===true?"th":"td");b.newRow=new Element("tr").insert({bottom:new Element(b.tag).update(b.isTitle===true?"Views":c.statics[1]&&c.statics[1].value&&!c.statics[1].value.blank()?c.statics[1].value:"0")}).insert({bottom:new Element(b.tag).update(b.isTitle===true?"Borrows":c.statics[2]&&c.statics[2].value&&!c.statics[2].value.blank()?c.statics[2].value:"0")}).insert({bottom:new Element(b.tag).update(c.title)}).insert({bottom:new Element(b.tag).update(b.isTitle===true?"ISBN":c.attributes.isbn?c.attributes.isbn[0].attribute:"")}).insert({bottom:new Element(b.tag).update(b.isTitle===true?"Author":c.attributes.author?c.attributes.author[0].attribute:"")}).insert({bottom:new Element(b.tag).update(b.isTitle===true?"Publisher":c.attributes.publisher?c.attributes.publisher[0].attribute:"")}).insert({bottom:new Element(b.tag).update(b.isTitle===true?"Publish Date":c.attributes.publish_date?c.attributes.publish_date[0].attribute:"")});return b.newRow},load:function(c,b,a,e){var d={};d.me=this;d.me.pagination.pageNo=(c||d.me.pagination.pageNo);d.me.pagination.pageSize=(b||d.me.pagination.pageSize);d.resetResult=(a===false?false:true);d.me.postAjax(d.me.getCallbackId("getStats"),{pagination:d.me.pagination},{onLoading:function(f,g){},onComplete:function(f,h){try{d.result=d.me.getResp(h,false,true);if(!d.result.items||d.result.items===undefined||d.result.items===null){throw"No item found/generated"}if(d.resetResult===true){$(d.me._htmlIds.resultListId).update("").insert({bottom:d.me._getResultRow({title:"TITLE"},true).wrap(new Element("thead"))});if($(d.me._htmlIds.totalCountDivId)){$(d.me._htmlIds.totalCountDivId).update(d.result.pagination.totalRows)}}d.tbody=$(d.me._htmlIds.resultListId).down("tbody");if(!d.tbody){$(d.me._htmlIds.resultListId).insert({bottom:d.tbody=new Element("tbody")})}d.result.items.each(function(i){d.tbody.insert({bottom:d.me._getResultRow(i)})});if(typeof(e)==="function"){e()}$(d.me._htmlIds.resultListId).insert({bottom:d.me._getPaginBtns(d.result.pagination)})}catch(g){$(d.me._htmlIds.resultListId).update(d.me.getAlertBox("ERROR",g).addClassName("alert-danger"))}}});return d.me}});