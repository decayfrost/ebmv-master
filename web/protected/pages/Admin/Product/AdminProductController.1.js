var PageJs=new Class.create();PageJs.prototype=Object.extend(new CrudPageJs(),{types:null,_geDl:function(b,a){return new Element("dl").insert({bottom:new Element("dt").update(b)}).insert({bottom:new Element("dd").update(a)})},_getResultDiv:function(a,b,d){var c={};c.me=this;c.includetitlerow=(b===false?false:true);c.resultDiv=$(c.me.resultDivId);a.each(function(e){c.resultDiv.insert({bottom:c.me._getItemRow(e,new Element("img",{editId:e.id,"class":"btn",src:"/themes/default/images/edit.png",alt:"EDIT"}).observe("click",function(){c.me.editItem(this)}),false)})})},_getAttrString:function(a){return a.map(function(b){return b.attribute||""})},_getInfoDiv:function(b){var a={};a.me=this;a.div=new Element("div");a.code="";$H(b.attributes).each(function(c){a.attrCode=c.key;if(typeof(c.value)==="object"){a.attrDiv=new Element("dl",{"class":"dl-horizontal"});a.attrDiv.insert({bottom:new Element("dt").update(c.value[0].type.name+":")});if(a.attrCode!==a.code){a.code=a.attrCode}a.attrValeusDiv=new Element("dd");c.value.each(function(d){console.debug(d);a.attrValeusDiv.insert({bottom:new Element("div",{"class":"attr_value"}).update(d.attribute)})});a.attrDiv.insert({bottom:a.attrValeusDiv});a.div.insert({bottom:a.attrDiv})}});return a.div},_getItemRow:function(d,b,c){var a={};a.me=this;a.productDiv=new Element("div",{"class":"list-group-item row nodefault plistitem"}).insert({bottom:new Element("div",{"class":"col-xs-3"}).insert({bottom:a.me._getProductImgDiv(d.attributes.image_thumb||null).addClassName("img-thumbnail")})}).insert({bottom:new Element("div",{"class":"col-xs-9"}).insert({bottom:new Element("h4").update(d.title)}).insert({bottom:new Element("div",{"class":"row"}).insert({bottom:a.me._getInfoDiv(d)})})});return a.productDiv},_getAdditionalProductInfo:function(b,c){var a={};a.me=this;a.isEditing=(c===true?true:false);a.div=new Element("div",{"class":"attrs_wrapper"});a.code="";$H(b.attributes).each(function(d){a.attrCode=d.key;if(typeof(d.value)==="object"){a.attrDiv=new Element("div",{"class":"attr_wrapper"});a.attrDiv.insert({bottom:new Element("span",{"class":"attr_name inlineblock"}).update(d.value[0].type.name)});if(a.attrCode!==a.code){a.code=a.attrCode}a.attrValeusDiv=new Element("span",{"class":"attr_values_wrapper inlineblock"});d.value.each(function(e){if(a.isEditing===false){a.attrValeusDiv.insert({bottom:new Element("div",{"class":"attr_value"}).update(e.attribute)})}else{a.attrValeusDiv.insert({bottom:new Element("input",{type:"text","class":"attr_value_edit rdcrnr lightBrdr",value:e.attribute})})}});a.attrDiv.insert({bottom:a.attrValeusDiv});a.div.insert({bottom:a.attrDiv})}});return a.div},showEditPanel:function(b){var a={};a.me=this;a.editProductId=$(b).readAttribute("editId");a.btnSpan=$(b).up("span.col.btns");a.mainItem=a.btnSpan.up("div.row.singleRowDiv").retrieve("main_item");a.option=new Element("span",{"class":"col btns"}).insert({bottom:new Element("img",{"class":"editBtn",src:"/themes/default/images/save.png",alt:"Save",title:"Save"}).observe("click",function(){a.me.saveEditedItem(this)})}).insert({bottom:new Element("img",{"class":"cancelBtn",src:"/themes/default/images/cancel.gif",alt:"Cancel",title:"Cancel"}).observe("click",function(){a.me.cancelEdit(this)})});a.editDiv=a.me._getItemRow(a.mainItem,a.option,true);a.btnSpan.up("div.row.singleRowDiv").insert({bottom:a.editDiv}).down("div.viewProductDiv").hide()},cancelEdit:function(b){var a={};a.me=this;a.me._hideShowAllEditPens(b,true);a.rowDiv=$(b).up("div.singleRowDiv");a.rowDiv.down("div.viewProductDiv").show();a.rowDiv.down("div.editProductDiv").remove()},saveEditedItem:function(b){var a={};a.me=this;try{a.editDiv=$(b).up("div.editProductDiv");a.editProductId=a.editDiv.down("span.col.id").innerHTML;a.eSukValue=a.editDiv.down("span.eSukBox").getValue();if(eSukValue===""||eSukValue===undefined){throw"SUK must be provided"}if(eTitleValue===""||eTitleValue===undefined){throw"Title must be provided"}}catch(c){alert(c)}a.editDiv.down("span.col.id")}});